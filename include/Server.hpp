#ifndef SERVER_HPP
#define SERVER_HPP

/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/
#include <unistd.h>
#include <cstring>
#include <cstdio>
#include <cstdlib>
#include <climits>
#include <sstream>
#include <iostream>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <poll.h>
#include <bitset>
# include <map>
#include <vector>
#include <algorithm>
/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„*/
#include "./HandShake.hpp"
#include "./Channel.hpp"
#include "./Client.hpp"
#include "./commands/ICommands.hpp"
/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„*/
#define BOLDWHITE		"\033[1m\033[37m"		/* Bold White */
#define RESET			"\033[0m"				/* Reset the color */
#define BOLDGREEN		"\033[1m\033[32m"		/* Bold Green */
#define BOLDYELLOW		"\033[1m\033[33m"		/* Bold Yellow */
#define BOLDRED			"\033[1m\033[31m"		/* Bold Red */
#define BOLDBLUE			"\033[1m\033[34m"		/* Bold Blue */
#define BOLDMAGENTA		"\033[1m\033[35m"		/* Bold Magenta */
#define BOLDCYAN			"\033[1m\033[36m"		/* Bold Cyan */

/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„*/
#define DEBUG 1

#if( DEBUG == 1 )
#define DEBUG_MSG(msg) std::cout													\
						<< BOLDMAGENTA												\
						<< "âšâšâšâšâšâšâšâšâšâšâšâšâšâšâšâšâš  ğ™³ğ™´ğ™±ğš„ğ™¶  âšâšâšâšâšâšâšâšâšâšâšâšâšâšâšâšâš"	\
						<< std::endl												\
						<< BOLDCYAN << msg << RESET									\
						<< std::endl;
#elif( DEBUG == 0 )
#define DEBUG_MSG(msg)

#endif
/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/
namespace IRC
{
	class Server {
		/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/
		private:
			int port;
			int servpass;
			std::vector <int> sockets;
			std::vector<Client> _clients;
			std::vector<Channel> _channels;
			int master_socket;
			int client_socket;
			std::vector <std::string> msg;
			/*-----------------------------------------*/
			// for the commands:
			std::string _command;
			std::vector<std::string> _commandParameters;
		/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/
		public:
			Server();
			~Server();

		/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/
			void create_socket(char *av);
			void multi_connection(HandShake* handShaker, IRC::ICommands* commands);
		/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„ï¸  SETTERS && GETTERS  â„â„ï¸â„â„ï¸â„ï¸â„â„ï¸â„â„â„ï¸â„*/
			void setMasterSocket(int socket);
			void setServPass(int pass);
			int getMasterSocket();
			int getServPass() const;
			int getPort();
		/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/
			void printClients();
	};
}
/*â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„â„ï¸â„*/

#endif